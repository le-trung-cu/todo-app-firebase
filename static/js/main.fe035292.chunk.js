(this["webpackJsonptodo-list-app"]=this["webpackJsonptodo-list-app"]||[]).push([[0],{47:function(e,t,a){e.exports=a(91)},52:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){},91:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(31),i=a.n(s),c=(a(52),a(4)),l=a.n(c),o=a(5),u=a(6),m=a(14),d=a(15),p=a(17),h=a(16),f=(a(54),a(55),a(11)),b=a(26);a(92),a(59),a(61);b.initializeApp({apiKey:"AIzaSyB1NAMiSk3wIPe7B-7Jt5WZBZcVD9VnIb8",authDomain:"todo-app-ba288.firebaseapp.com",databaseURL:"https://todo-app-ba288.firebaseio.com",projectId:"todo-app-ba288",storageBucket:"todo-app-ba288.appspot.com",messagingSenderId:"693925251734",appId:"1:693925251734:web:be00b4f64fac501afd50b7",measurementId:"G-FY4WVSFSY1"}),b.analytics();var k=new b.auth.GoogleAuthProvider,v=b.firestore(),g=b.auth(),E=function(){return g.signInWithPopup(k)},_=function(e,t){return g.signInWithEmailAndPassword(e,t)},N=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.signOut();case 2:console.log("..........sssssssssssss......");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){return v.collection("users/".concat(g.currentUser.uid,"/tasks"))},w=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g.currentUser){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,O().add(t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g.currentUser){e.next=2;break}return e.abrupt("return");case 2:return a=O().doc(t.id),e.next=5,a.get();case 5:if(!e.sent.exists){e.next=10;break}return e.next=8,a.update(t);case 8:e.next=11;break;case 10:throw new Error("task not exists");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g.currentUser){e.next=2;break}return e.abrupt("return");case 2:return a=O().doc(t),e.next=5,a.get();case 5:if(!e.sent.exists){e.next=10;break}return e.next=8,a.delete();case 8:e.next=11;break;case 10:throw new Error("task not exists");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n,r,s,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return n=v.doc("users/".concat(t.uid)),e.next=5,n.get();case 5:if(e.sent.exists){e.next=17;break}return r=t.displayName,s=t.email,i=new Date,e.prev=9,e.next=12,n.set(Object(o.a)({displayName:r,email:s,createdAt:i},a));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(9),console.log("error creating user",e.t0.message);case 17:return e.abrupt("return",n);case 18:case"end":return e.stop()}}),e,null,[[9,14]])})));return function(t,a){return e.apply(this,arguments)}}(),S=function(e){var t=e.currentUser;return r.a.createElement("header",null,r.a.createElement("nav",{className:"navigation"},r.a.createElement("ul",{className:"navigation__list"},r.a.createElement("li",{className:"navigation__item"},r.a.createElement(f.b,{className:"navigation__link",to:"/todo-app-firebase/"},"Day")),r.a.createElement("li",{className:"navigation__item"},r.a.createElement("a",{className:"navigation__link navigation__link--disabled",href:"#"},"Week")),r.a.createElement("li",{className:"navigation__item navigation__item--disabled"},r.a.createElement("a",{className:"navigation__link navigation__link--disabled",href:"#"},"Month")),r.a.createElement("li",{className:"navigation__item navigation__item--disabled"},r.a.createElement("a",{className:"navigation__link navigation__link--disabled",href:"#"},"Year")),r.a.createElement("li",{className:"navigation__item"},t?r.a.createElement("a",{className:"navigation__link",onClick:N},"Sign Out"):r.a.createElement(f.b,{className:"navigation__link",to:"/todo-app-firebase/sign-in"},"Sign In")))),t?r.a.createElement("h5",{className:"wellcome-message"},"Hi: ",t.displayName):null)},P=a(37),C=a(32),T=a(22),U=a(45),I=a.n(U),D=(a(82),function(e){var t=e.handleChangeDateQuery,a=Object(n.useState)(new Date),s=Object(T.a)(a,2),i=s[0],c=s[1];Object(n.useEffect)((function(){var e=i.toString().split(" ");t("".concat(e[0]," ").concat(e[1]," ").concat(e[2]," ").concat(e[3]))}),[i]);var l=function(e){var t=i.toString().split(" ");switch(e){case"day":return t[0];case"month":return t[1];case"date":return t[2];case"year":return t[3]}};return r.a.createElement("div",{className:"header-date"},r.a.createElement("div",{className:"header-date__content"},r.a.createElement("h3",{className:"header-date__main"},l("day")),r.a.createElement("p",{className:"header-date__sub"},"".concat(l("month")," ").concat(l("date"),", ").concat(l("year"))),r.a.createElement(I.a,{onChange:function(e){c(e)},value:i})),r.a.createElement("i",{className:"flaticon-left-arrow header-date__next-day"}),r.a.createElement("i",{className:"flaticon-next header-date__prev-day"}))}),A=(a(83),function(e){var t=e.handleAddTask,a=e.dateQuery,s=Object(n.useState)(""),i=Object(T.a)(s,2),c=i[0],l=i[1],o=Object(n.useState)(""),u=Object(T.a)(o,2),m=u[0],d=u[1];return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t({createdAt:a,isCompleted:!1,title:c,description:m,isPin:!1}),l(""),d("")},className:"input-add-task",name:"taskForm"},r.a.createElement("i",{className:"flaticon-sort input-add-task__icon"}),r.a.createElement("input",{className:"input-add-task__input",name:"taskTitle",type:"text",placeholder:"Add a task...",value:c,onChange:function(e){return l(e.target.value)}}),c||m?r.a.createElement(r.a.Fragment,null,r.a.createElement("textarea",{className:"input-add-task__input input-add-task__input--description",name:"taskDescription",type:"text",value:m,placeholder:"description",onChange:function(e){return d(e.target.value)}}),r.a.createElement("button",{className:"input-add-task__btn"},"Ok")):null)}),Q=(a(84),function(e){var t=e.isChecked,a=e.onChange;return r.a.createElement("div",{role:"checkbox",className:"checkbox".concat(t?" checked":"")},r.a.createElement("label",{className:"checkbox__label",onClick:a}))}),W=(a(85),a(86),function(e){var t=e.isPin,a=e.handlePinTask,n=e.handleDeleteTask;return r.a.createElement("ul",{className:"todo-item-menu"},r.a.createElement("li",{className:"todo-item-menu__item"},r.a.createElement("button",{href:"",onClick:a},r.a.createElement("i",{className:"flaticon-outline todo-item-menu__icon"}),r.a.createElement("span",{className:"todo-item-menu__text"},t?"Unpin task":"Pin on the top"))),r.a.createElement("li",{className:"todo-item-menu__item"},r.a.createElement("i",{className:"flaticon-note-blank-paper-with-one-folded-corner todo-item-menu__icon"}),r.a.createElement("span",{className:"todo-item-menu__text"},"Add a memo")),r.a.createElement("li",{className:"todo-item-menu__item"},r.a.createElement("button",{onClick:n},r.a.createElement("i",{className:"flaticon-recycle-bin todo-item-menu__icon"}),r.a.createElement("span",{className:"todo-item-menu__text"},"Delete"))))}),G=function(e){var t=e.task,a=e.handleCompleteTask,s=e.handlePinTask,i=e.handleDeleteTask,c=t.isCompleted,l=t.isPin,o=t.title,u=t.description,m=t.id,d=Object(n.useState)(!1),p=Object(T.a)(d,2),h=p[0],f=p[1];return r.a.createElement("li",{className:"todo-item"},l?r.a.createElement("i",{className:"flaticon-outline todo-item__pin"}):null,r.a.createElement(Q,{onChange:a,isChecked:c,inputId:"taskId_"+m,inputName:"taskName_"+m}),r.a.createElement("div",{className:"todo-item__box"},r.a.createElement("h5",{className:"todo-item__main"},o),r.a.createElement("p",{className:"todo-item__sub"},u)),r.a.createElement("button",{className:"flaticon-more todo-item__menu-btn",onClick:function(){f(!h)}}),h?r.a.createElement(W,{isPin:l,handlePinTask:s,handleDeleteTask:i}):null)},B=(a(87),function(e){var t=e.pinTask,a=e.tasks,n=e.handleCompleteTask,s=e.handlePinTask,i=e.handleDeleteTask;return r.a.createElement("ul",{className:"todo__list".concat(t?" todo__list--pin":"")},a.map((function(e,t){return r.a.createElement(G,{key:e.id,task:e,handleCompleteTask:function(){return n(e)},handlePinTask:function(){return s(e)},handleDeleteTask:function(){return i(e)}})})))}),q=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handleCompleteTask=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e){return e===t?Object(o.a)(Object(o.a)({},t),{},{isCompleted:!t.isCompleted}):e},t.isPin?(s=n.state.taskPins.map(a),n.setState({taskPins:s})):(r=n.state.tasks.map(a),n.setState({tasks:r})),e.next=4,j(Object(o.a)(Object(o.a)({},t),{},{isCompleted:!t.isCompleted}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleAddTask=function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t);case 2:a=e.sent,n.setState({tasks:[Object(o.a)(Object(o.a)({},t),{},{id:a.id})].concat(Object(C.a)(n.state.tasks))});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handlePinTask=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isPin?(a=n.state.taskPins.filter((function(e){return e!==t})),n.setState({taskPins:a}),n.setState({tasks:[Object(o.a)(Object(o.a)({},t),{},{isPin:!t.isPin})].concat(Object(C.a)(n.state.tasks))})):(r=n.state.tasks.filter((function(e){return e!==t})),n.setState({tasks:r}),n.setState({taskPins:[Object(o.a)(Object(o.a)({},t),{},{isPin:!t.isPin})].concat(Object(C.a)(n.state.taskPins))})),e.next=3,j(Object(o.a)(Object(o.a)({},t),{},{isPin:!t.isPin}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleDeleteTask=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isPin?(a=n.state.taskPins.filter((function(e){return e!==t})),n.setState({taskPins:a})):(r=n.state.tasks.filter((function(e){return e!==t})),n.setState({tasks:r})),e.next=3,x(t.id);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleChangeDateQuery=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,r,s,i,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!g.currentUser){e.next=9;break}return e.next=3,O().where("createdAt","==",t).get();case 3:a=e.sent,r=[],s=Object(P.a)(a.docs);try{for(s.s();!(i=s.n()).done;)c=i.value,r.push(Object(o.a)(Object(o.a)({},c.data()),{},{id:c.id}))}catch(l){s.e(l)}finally{s.f()}n.setState({tasks:r.filter((function(e){return!1===e.isPin}))}),n.setState({taskPins:r.filter((function(e){return!0===e.isPin}))});case 9:n.setState({dateQuery:t});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={tasks:[],taskPins:[],dateQuery:""},n.unSubscribe=null,n.unSubscribeTaskSnapshot=null,n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.unSubscribe=g.onAuthStateChanged(function(){var t=Object(u.a)(l.a.mark((function t(a){var n,r,s,i,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=9;break}return t.next=3,O().where("createdAt","==",e.state.dateQuery).get();case 3:n=t.sent,r=[],s=Object(P.a)(n.docs);try{for(s.s();!(i=s.n()).done;)c=i.value,r.push(Object(o.a)(Object(o.a)({},c.data()),{},{id:c.id}))}catch(l){s.e(l)}finally{s.f()}e.setState({tasks:r.filter((function(e){return!1===e.isPin}))}),e.setState({taskPins:r.filter((function(e){return!0===e.isPin}))});case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"componentWillUnmount",value:function(){this.unSubscribe()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("main",{className:"main"},r.a.createElement(D,{handleChangeDateQuery:this.handleChangeDateQuery}),r.a.createElement(A,{handleAddTask:this.handleAddTask,dateQuery:this.state.dateQuery}),r.a.createElement("div",{className:"todo"},r.a.createElement("ul",{className:"todo__list-pin"}),r.a.createElement(B,{pinTask:!0,tasks:this.state.taskPins,handleCompleteTask:this.handleCompleteTask,handlePinTask:this.handlePinTask,handleDeleteTask:this.handleDeleteTask}),r.a.createElement(B,{tasks:this.state.tasks,handleCompleteTask:this.handleCompleteTask,handlePinTask:this.handlePinTask,handleDeleteTask:this.handleDeleteTask}))))}}]),a}(n.Component),F=a(18),L=a(46),M=(a(88),function(e){var t=e.name,a=e.label,n=e.id,s=Object(L.a)(e,["name","label","id"]);return r.a.createElement("div",{className:"input-form"},r.a.createElement("input",Object.assign({placeholder:a,className:"input-form__input",name:t,id:n},s)),r.a.createElement("label",{className:"input-form__label",htmlFor:n},a))}),J=(a(89),function(){return r.a.createElement("button",{onClick:E,className:"sign-in__btn sign-in__btn--google"},"Google")}),V=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).handelInputChange=function(t){var a=t.target,n=a.name,r=a.value,s={};s[n]=r,e.setState(s)},e.handleSignInSubmit=function(){var t=Object(u.a)(l.a.mark((function t(a){var n,r,s,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=e.state,r=n.email,s=n.password,t.prev=2,t.next=5,_(r,s);case 5:i=t.sent,i.user,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.log(t.t0);case 12:e.setState({email:"",password:""});case 13:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}(),e.state={email:"",password:""},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password;return r.a.createElement("div",{className:"sign-in"},r.a.createElement("h2",{className:"sign-in__heading"},"SIGN IN"),r.a.createElement("form",{action:"",onSubmit:this.handleSignInSubmit},r.a.createElement(M,{id:"email",name:"email",label:"Email",value:t,required:!0,minLength:"6",type:"email",onChange:this.handelInputChange}),r.a.createElement(M,{type:"password",id:"password",name:"password",label:"Password",minLength:"2",value:a,required:!0,onChange:this.handelInputChange}),r.a.createElement("div",{className:"sign-in__row"},r.a.createElement("button",{className:"sign-in__btn"},"SIGN IN"),r.a.createElement(f.b,{className:"link-color",to:"/todo-app-firebase/sign-up"},"Sign up?"))),r.a.createElement(J,null))}}]),a}(n.Component),Y=a(12),z=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).handelInputChange=function(t){var a=t.target,n=a.name,r=a.value,s={};s[n]=r,e.setState(s)},e.handleSignUpSubmit=function(){var t=Object(u.a)(l.a.mark((function t(a){var n,r,s,i,c,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=e.state,r=n.signUpEmail,s=n.signUpPassword,i=n.displayName,t.prev=2,t.next=5,l=r,u=s,g.createUserWithEmailAndPassword(l,u);case 5:c=t.sent,o=c.user,y(o,{displayName:i}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),console.log(t.t0);case 13:e.setState({signUpEmail:"",signUpPassword:"",displayName:""});case 14:case"end":return t.stop()}var l,u}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}(),e.state={signUpEmail:"",signUpPassword:"",displayName:""},e}return Object(d.a)(a,[{key:"render",value:function(){var e,t=this.state,a=t.signUpEmail,n=t.signUpPassword,s=t.displayName;return r.a.createElement("div",{className:"sign-up sign-in"},r.a.createElement("h2",{className:"sign-in__heading"},"SIGN Up"),r.a.createElement("form",{action:"",onSubmit:this.handleSignUpSubmit},r.a.createElement(M,(e={id:"signUpEmail",type:"email",name:"signUpEmail",label:"Email"},Object(Y.a)(e,"type","email"),Object(Y.a)(e,"required",!0),Object(Y.a)(e,"onChange",this.handelInputChange),Object(Y.a)(e,"value",a),e)),r.a.createElement(M,Object(Y.a)({onChange:this.handelInputChange,type:"password",id:"signUpPassword",name:"signUpPassword",label:"Password",minLength:"6",required:!0,value:n},"onChange",this.handelInputChange)),r.a.createElement(M,Object(Y.a)({onChange:this.handelInputChange,type:"text",id:"displayName",name:"displayName",label:"Display Name",minLength:"2",required:!0,value:s},"onChange",this.handelInputChange)),r.a.createElement("div",{className:"sign-in__row"},r.a.createElement("button",{className:"sign-in__btn"},"SIGN UP"),r.a.createElement(f.b,{className:"link-color",to:"/todo-app-firebase/sign-in"},"Sign In?"))),r.a.createElement(J,null))}}]),a}(n.Component),Z=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).state={currentUser:null},e.unSubscribe=null,e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.unSubscribe=g.onAuthStateChanged(function(){var t=Object(u.a)(l.a.mark((function t(a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=7;break}return t.next=3,y(a);case 3:t.sent.onSnapshot((function(t){console.log("current user change");var a=Object(o.a)({id:t.id},t.data());e.setState({currentUser:a})})),t.next=8;break;case 7:e.setState({currentUser:null});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"componentWillUnmount",value:function(){this.unSubscribe()}},{key:"render",value:function(){return console.log(this.state.currentUser),r.a.createElement(f.a,null,r.a.createElement("div",{className:"app-wrap"},r.a.createElement("div",{className:"app"},r.a.createElement(S,{currentUser:this.state.currentUser}),r.a.createElement(F.d,null,r.a.createElement(F.b,{exact:!0,path:"/todo-app-firebase"},this.state.currentUser?null:r.a.createElement(F.a,{to:"/todo-app-firebase/sign-in"}),r.a.createElement(q,null)),r.a.createElement(F.b,{exact:!0,path:"/todo-app-firebase/sign-in"},this.state.currentUser?r.a.createElement(F.a,{to:"/todo-app-firebase"}):r.a.createElement(V,null)),r.a.createElement(F.b,{exact:!0,path:"/todo-app-firebase/sign-up"},this.state.currentUser?r.a.createElement(F.a,{to:"/todo-app-firebase"}):r.a.createElement(z,null))))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[47,1,2]]]);
//# sourceMappingURL=main.fe035292.chunk.js.map